<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type="text/css">
.highlight { background-color: rgb(255, 255, 204); }
pre { display: inline; }
div.calls { display: inline; }
span.method_definition { font-weight: bold; }
span.method_call { font-weight: bold; }
div.line a { font-size: 12px; }
</style>
</head>
<body>
<div class='line' id='1'><pre>  1: </pre><pre>require 'i18n/version'</pre></div>
<div class='line' id='2'><pre>  2: </pre><pre>require 'i18n/exceptions'</pre></div>
<div class='line' id='3'><pre>  3: </pre><pre>require 'i18n/interpolate/ruby'</pre></div>
<div class='line' id='4'><pre>  4: </pre><pre></pre></div>
<div class='line' id='5'><pre>  5: </pre><pre>module I18n</pre></div>
<div class='line' id='6'><pre>  6: </pre><pre>  autoload :Backend, 'i18n/backend'</pre></div>
<div class='line' id='7'><pre>  7: </pre><pre>  autoload :Config,  'i18n/config'</pre></div>
<div class='line' id='8'><pre>  8: </pre><pre>  autoload :Gettext, 'i18n/gettext'</pre></div>
<div class='line' id='9'><pre>  9: </pre><pre>  autoload :Locale,  'i18n/locale'</pre></div>
<div class='line' id='10'><pre> 10: </pre><pre>  autoload :Tests,   'i18n/tests'</pre></div>
<div class='line' id='11'><pre> 11: </pre><pre></pre></div>
<div class='line' id='12'><pre> 12: </pre><pre>  RESERVED_KEYS = [:scope, :default, :separator, :resolve, :object, :fallback, :format, :cascade, :throw, :raise, :rescue_format]</pre></div>
<div class='line' id='13'><pre> 13: </pre><pre>  RESERVED_KEYS_PATTERN = /%\{(#{RESERVED_KEYS.join("|")})\}/</pre></div>
<div class='line' id='14'><pre> 14: </pre><pre></pre></div>
<div class='line' id='15'><pre> 15: </pre><pre>  extend(Module.new {</pre></div>
<div class='line' id='16'><pre> 16: </pre><pre>    # Gets I18n configuration object.</pre></div>
<div class='line' id='17'><pre> 17: </pre><div class='calls'><span class='method_definition'><pre>    def config</pre></span> <span style='display:none;'><a href='i18n.rb.html#31'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/i18n-0.6.5/lib/i18n.rb:31</a></span></div></div>
<div class='line' id='18'><pre> 18: </pre><pre>      Thread.current[:i18n_config] ||= I18n::Config.new</pre></div>
<div class='line' id='19'><pre> 19: </pre><pre>    end</pre></div>
<div class='line' id='20'><pre> 20: </pre><pre></pre></div>
<div class='line' id='21'><pre> 21: </pre><pre>    # Sets I18n configuration object.</pre></div>
<div class='line' id='22'><pre> 22: </pre><pre>    def config=(value)</pre></div>
<div class='line' id='23'><pre> 23: </pre><pre>      Thread.current[:i18n_config] = value</pre></div>
<div class='line' id='24'><pre> 24: </pre><pre>    end</pre></div>
<div class='line' id='25'><pre> 25: </pre><pre></pre></div>
<div class='line' id='26'><pre> 26: </pre><pre>    # Write methods which delegates to the configuration object</pre></div>
<div class='line' id='27'><pre> 27: </pre><pre>    %w(locale backend default_locale available_locales default_separator</pre></div>
<div class='line' id='28'><pre> 28: </pre><pre>      exception_handler load_path).each do |method|</pre></div>
<div class='line' id='29'><pre> 29: </pre><pre>      module_eval <<-DELEGATORS, __FILE__, __LINE__ + 1</pre></div>
<div class='line' id='30'><pre> 30: </pre><div class='calls'><span class='method_definition'><pre>        def #{method}</pre></span> <span style='display:none;'><a href='../../activesupport-3.2.14/lib/active_support/i18n.rb.html#9'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/activesupport-3.2.14/lib/active_support/i18n.rb:9</a></span></div></div>
<div class='line' id='31'><pre> 31: </pre><div class='calls'><span class='method_call'><pre>          config.#{method}</pre></span> <span style='display:none;'><a href='i18n.rb.html#17'>#<Module:0x007f8c9c82ec60>#config</a> <a href='i18n/config.rb.html#99'>I18n::Config#load_path</a></span></div></div>
<div class='line' id='32'><pre> 32: </pre><pre>        end</pre></div>
<div class='line' id='33'><pre> 33: </pre><pre></pre></div>
<div class='line' id='34'><pre> 34: </pre><pre>        def #{method}=(value)</pre></div>
<div class='line' id='35'><pre> 35: </pre><pre>          config.#{method} = (value)</pre></div>
<div class='line' id='36'><pre> 36: </pre><pre>        end</pre></div>
<div class='line' id='37'><pre> 37: </pre><pre>      DELEGATORS</pre></div>
<div class='line' id='38'><pre> 38: </pre><pre>    end</pre></div>
<div class='line' id='39'><pre> 39: </pre><pre></pre></div>
<div class='line' id='40'><pre> 40: </pre><pre>    # Tells the backend to reload translations. Used in situations like the</pre></div>
<div class='line' id='41'><pre> 41: </pre><pre>    # Rails development environment. Backends can implement whatever strategy</pre></div>
<div class='line' id='42'><pre> 42: </pre><pre>    # is useful.</pre></div>
<div class='line' id='43'><pre> 43: </pre><pre>    def reload!</pre></div>
<div class='line' id='44'><pre> 44: </pre><pre>      config.backend.reload!</pre></div>
<div class='line' id='45'><pre> 45: </pre><pre>    end</pre></div>
<div class='line' id='46'><pre> 46: </pre><pre></pre></div>
<div class='line' id='47'><pre> 47: </pre><pre>    # Translates, pluralizes and interpolates a given key using a given locale,</pre></div>
<div class='line' id='48'><pre> 48: </pre><pre>    # scope, and default, as well as interpolation values.</pre></div>
<div class='line' id='49'><pre> 49: </pre><pre>    #</pre></div>
<div class='line' id='50'><pre> 50: </pre><pre>    # *LOOKUP*</pre></div>
<div class='line' id='51'><pre> 51: </pre><pre>    #</pre></div>
<div class='line' id='52'><pre> 52: </pre><pre>    # Translation data is organized as a nested hash using the upper-level keys</pre></div>
<div class='line' id='53'><pre> 53: </pre><pre>    # as namespaces. <em>E.g.</em>, ActionView ships with the translation:</pre></div>
<div class='line' id='54'><pre> 54: </pre><pre>    # <tt>:date => {:formats => {:short => "%b %d"}}</tt>.</pre></div>
<div class='line' id='55'><pre> 55: </pre><pre>    #</pre></div>
<div class='line' id='56'><pre> 56: </pre><pre>    # Translations can be looked up at any level of this hash using the key argument</pre></div>
<div class='line' id='57'><pre> 57: </pre><pre>    # and the scope option. <em>E.g.</em>, in this example <tt>I18n.t :date</tt></pre></div>
<div class='line' id='58'><pre> 58: </pre><pre>    # returns the whole translations hash <tt>{:formats => {:short => "%b %d"}}</tt>.</pre></div>
<div class='line' id='59'><pre> 59: </pre><pre>    #</pre></div>
<div class='line' id='60'><pre> 60: </pre><pre>    # Key can be either a single key or a dot-separated key (both Strings and Symbols</pre></div>
<div class='line' id='61'><pre> 61: </pre><pre>    # work). <em>E.g.</em>, the short format can be looked up using both:</pre></div>
<div class='line' id='62'><pre> 62: </pre><pre>    #   I18n.t 'date.formats.short'</pre></div>
<div class='line' id='63'><pre> 63: </pre><pre>    #   I18n.t :'date.formats.short'</pre></div>
<div class='line' id='64'><pre> 64: </pre><pre>    #</pre></div>
<div class='line' id='65'><pre> 65: </pre><pre>    # Scope can be either a single key, a dot-separated key or an array of keys</pre></div>
<div class='line' id='66'><pre> 66: </pre><pre>    # or dot-separated keys. Keys and scopes can be combined freely. So these</pre></div>
<div class='line' id='67'><pre> 67: </pre><pre>    # examples will all look up the same short date format:</pre></div>
<div class='line' id='68'><pre> 68: </pre><pre>    #   I18n.t 'date.formats.short'</pre></div>
<div class='line' id='69'><pre> 69: </pre><pre>    #   I18n.t 'formats.short', :scope => 'date'</pre></div>
<div class='line' id='70'><pre> 70: </pre><pre>    #   I18n.t 'short', :scope => 'date.formats'</pre></div>
<div class='line' id='71'><pre> 71: </pre><pre>    #   I18n.t 'short', :scope => %w(date formats)</pre></div>
<div class='line' id='72'><pre> 72: </pre><pre>    #</pre></div>
<div class='line' id='73'><pre> 73: </pre><pre>    # *INTERPOLATION*</pre></div>
<div class='line' id='74'><pre> 74: </pre><pre>    #</pre></div>
<div class='line' id='75'><pre> 75: </pre><pre>    # Translations can contain interpolation variables which will be replaced by</pre></div>
<div class='line' id='76'><pre> 76: </pre><pre>    # values passed to #translate as part of the options hash, with the keys matching</pre></div>
<div class='line' id='77'><pre> 77: </pre><pre>    # the interpolation variable names.</pre></div>
<div class='line' id='78'><pre> 78: </pre><pre>    #</pre></div>
<div class='line' id='79'><pre> 79: </pre><pre>    # <em>E.g.</em>, with a translation <tt>:foo => "foo %{bar}"</tt> the option</pre></div>
<div class='line' id='80'><pre> 80: </pre><pre>    # value for the key +bar+ will be interpolated into the translation:</pre></div>
<div class='line' id='81'><pre> 81: </pre><pre>    #   I18n.t :foo, :bar => 'baz' # => 'foo baz'</pre></div>
<div class='line' id='82'><pre> 82: </pre><pre>    #</pre></div>
<div class='line' id='83'><pre> 83: </pre><pre>    # *PLURALIZATION*</pre></div>
<div class='line' id='84'><pre> 84: </pre><pre>    #</pre></div>
<div class='line' id='85'><pre> 85: </pre><pre>    # Translation data can contain pluralized translations. Pluralized translations</pre></div>
<div class='line' id='86'><pre> 86: </pre><pre>    # are arrays of singluar/plural versions of translations like <tt>['Foo', 'Foos']</tt>.</pre></div>
<div class='line' id='87'><pre> 87: </pre><pre>    #</pre></div>
<div class='line' id='88'><pre> 88: </pre><pre>    # Note that <tt>I18n::Backend::Simple</tt> only supports an algorithm for English</pre></div>
<div class='line' id='89'><pre> 89: </pre><pre>    # pluralization rules. Other algorithms can be supported by custom backends.</pre></div>
<div class='line' id='90'><pre> 90: </pre><pre>    #</pre></div>
<div class='line' id='91'><pre> 91: </pre><pre>    # This returns the singular version of a pluralized translation:</pre></div>
<div class='line' id='92'><pre> 92: </pre><pre>    #   I18n.t :foo, :count => 1 # => 'Foo'</pre></div>
<div class='line' id='93'><pre> 93: </pre><pre>    #</pre></div>
<div class='line' id='94'><pre> 94: </pre><pre>    # These both return the plural version of a pluralized translation:</pre></div>
<div class='line' id='95'><pre> 95: </pre><pre>    #   I18n.t :foo, :count => 0 # => 'Foos'</pre></div>
<div class='line' id='96'><pre> 96: </pre><pre>    #   I18n.t :foo, :count => 2 # => 'Foos'</pre></div>
<div class='line' id='97'><pre> 97: </pre><pre>    #</pre></div>
<div class='line' id='98'><pre> 98: </pre><pre>    # The <tt>:count</tt> option can be used both for pluralization and interpolation.</pre></div>
<div class='line' id='99'><pre> 99: </pre><pre>    # <em>E.g.</em>, with the translation</pre></div>
<div class='line' id='100'><pre>100: </pre><pre>    # <tt>:foo => ['%{count} foo', '%{count} foos']</tt>, count will</pre></div>
<div class='line' id='101'><pre>101: </pre><pre>    # be interpolated to the pluralized translation:</pre></div>
<div class='line' id='102'><pre>102: </pre><pre>    #   I18n.t :foo, :count => 1 # => '1 foo'</pre></div>
<div class='line' id='103'><pre>103: </pre><pre>    #</pre></div>
<div class='line' id='104'><pre>104: </pre><pre>    # *DEFAULTS*</pre></div>
<div class='line' id='105'><pre>105: </pre><pre>    #</pre></div>
<div class='line' id='106'><pre>106: </pre><pre>    # This returns the translation for <tt>:foo</tt> or <tt>default</tt> if no translation was found:</pre></div>
<div class='line' id='107'><pre>107: </pre><pre>    #   I18n.t :foo, :default => 'default'</pre></div>
<div class='line' id='108'><pre>108: </pre><pre>    #</pre></div>
<div class='line' id='109'><pre>109: </pre><pre>    # This returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt> if no</pre></div>
<div class='line' id='110'><pre>110: </pre><pre>    # translation for <tt>:foo</tt> was found:</pre></div>
<div class='line' id='111'><pre>111: </pre><pre>    #   I18n.t :foo, :default => :bar</pre></div>
<div class='line' id='112'><pre>112: </pre><pre>    #</pre></div>
<div class='line' id='113'><pre>113: </pre><pre>    # Returns the translation for <tt>:foo</tt> or the translation for <tt>:bar</tt></pre></div>
<div class='line' id='114'><pre>114: </pre><pre>    # or <tt>default</tt> if no translations for <tt>:foo</tt> and <tt>:bar</tt> were found.</pre></div>
<div class='line' id='115'><pre>115: </pre><pre>    #   I18n.t :foo, :default => [:bar, 'default']</pre></div>
<div class='line' id='116'><pre>116: </pre><pre>    #</pre></div>
<div class='line' id='117'><pre>117: </pre><pre>    # *BULK LOOKUP*</pre></div>
<div class='line' id='118'><pre>118: </pre><pre>    #</pre></div>
<div class='line' id='119'><pre>119: </pre><pre>    # This returns an array with the translations for <tt>:foo</tt> and <tt>:bar</tt>.</pre></div>
<div class='line' id='120'><pre>120: </pre><pre>    #   I18n.t [:foo, :bar]</pre></div>
<div class='line' id='121'><pre>121: </pre><pre>    #</pre></div>
<div class='line' id='122'><pre>122: </pre><pre>    # Can be used with dot-separated nested keys:</pre></div>
<div class='line' id='123'><pre>123: </pre><pre>    #   I18n.t [:'baz.foo', :'baz.bar']</pre></div>
<div class='line' id='124'><pre>124: </pre><pre>    #</pre></div>
<div class='line' id='125'><pre>125: </pre><pre>    # Which is the same as using a scope option:</pre></div>
<div class='line' id='126'><pre>126: </pre><pre>    #   I18n.t [:foo, :bar], :scope => :baz</pre></div>
<div class='line' id='127'><pre>127: </pre><pre>    #</pre></div>
<div class='line' id='128'><pre>128: </pre><pre>    # *LAMBDAS*</pre></div>
<div class='line' id='129'><pre>129: </pre><pre>    #</pre></div>
<div class='line' id='130'><pre>130: </pre><pre>    # Both translations and defaults can be given as Ruby lambdas. Lambdas will be</pre></div>
<div class='line' id='131'><pre>131: </pre><pre>    # called and passed the key and options.</pre></div>
<div class='line' id='132'><pre>132: </pre><pre>    #</pre></div>
<div class='line' id='133'><pre>133: </pre><pre>    # E.g. assuming the key <tt>:salutation</tt> resolves to:</pre></div>
<div class='line' id='134'><pre>134: </pre><pre>    #   lambda { |key, options| options[:gender] == 'm' ? "Mr. %{options[:name]}" : "Mrs. %{options[:name]}" }</pre></div>
<div class='line' id='135'><pre>135: </pre><pre>    #</pre></div>
<div class='line' id='136'><pre>136: </pre><pre>    # Then <tt>I18n.t(:salutation, :gender => 'w', :name => 'Smith') will result in "Mrs. Smith".</pre></div>
<div class='line' id='137'><pre>137: </pre><pre>    #</pre></div>
<div class='line' id='138'><pre>138: </pre><pre>    # It is recommended to use/implement lambdas in an "idempotent" way. E.g. when</pre></div>
<div class='line' id='139'><pre>139: </pre><pre>    # a cache layer is put in front of I18n.translate it will generate a cache key</pre></div>
<div class='line' id='140'><pre>140: </pre><pre>    # from the argument values passed to #translate. Therefor your lambdas should</pre></div>
<div class='line' id='141'><pre>141: </pre><pre>    # always return the same translations/values per unique combination of argument</pre></div>
<div class='line' id='142'><pre>142: </pre><pre>    # values.</pre></div>
<div class='line' id='143'><pre>143: </pre><pre>    def translate(*args)</pre></div>
<div class='line' id='144'><pre>144: </pre><pre>      options  = args.last.is_a?(Hash) ? args.pop.dup : {}</pre></div>
<div class='line' id='145'><pre>145: </pre><pre>      key      = args.shift</pre></div>
<div class='line' id='146'><pre>146: </pre><pre>      backend  = config.backend</pre></div>
<div class='line' id='147'><pre>147: </pre><pre>      locale   = options.delete(:locale) || config.locale</pre></div>
<div class='line' id='148'><pre>148: </pre><pre>      handling = options.delete(:throw) && :throw || options.delete(:raise) && :raise # TODO deprecate :raise</pre></div>
<div class='line' id='149'><pre>149: </pre><pre></pre></div>
<div class='line' id='150'><pre>150: </pre><pre>      raise I18n::ArgumentError if key.is_a?(String) && key.empty?</pre></div>
<div class='line' id='151'><pre>151: </pre><pre></pre></div>
<div class='line' id='152'><pre>152: </pre><pre>      result = catch(:exception) do</pre></div>
<div class='line' id='153'><pre>153: </pre><pre>        if key.is_a?(Array)</pre></div>
<div class='line' id='154'><pre>154: </pre><pre>          key.map { |k| backend.translate(locale, k, options) }</pre></div>
<div class='line' id='155'><pre>155: </pre><pre>        else</pre></div>
<div class='line' id='156'><pre>156: </pre><pre>          backend.translate(locale, key, options)</pre></div>
<div class='line' id='157'><pre>157: </pre><pre>        end</pre></div>
<div class='line' id='158'><pre>158: </pre><pre>      end</pre></div>
<div class='line' id='159'><pre>159: </pre><pre>      result.is_a?(MissingTranslation) ? handle_exception(handling, result, locale, key, options) : result</pre></div>
<div class='line' id='160'><pre>160: </pre><pre>    end</pre></div>
<div class='line' id='161'><pre>161: </pre><pre>    alias :t :translate</pre></div>
<div class='line' id='162'><pre>162: </pre><pre></pre></div>
<div class='line' id='163'><pre>163: </pre><pre>    # Wrapper for <tt>translate</tt> that adds <tt>:raise => true</tt>. With</pre></div>
<div class='line' id='164'><pre>164: </pre><pre>    # this option, if no translation is found, it will raise <tt>I18n::MissingTranslationData</tt></pre></div>
<div class='line' id='165'><pre>165: </pre><pre>    def translate!(key, options={})</pre></div>
<div class='line' id='166'><pre>166: </pre><pre>      translate(key, options.merge(:raise => true))</pre></div>
<div class='line' id='167'><pre>167: </pre><pre>    end</pre></div>
<div class='line' id='168'><pre>168: </pre><pre>    alias :t! :translate!</pre></div>
<div class='line' id='169'><pre>169: </pre><pre></pre></div>
<div class='line' id='170'><pre>170: </pre><pre>    # Transliterates UTF-8 characters to ASCII. By default this method will</pre></div>
<div class='line' id='171'><pre>171: </pre><pre>    # transliterate only Latin strings to an ASCII approximation:</pre></div>
<div class='line' id='172'><pre>172: </pre><pre>    #</pre></div>
<div class='line' id='173'><pre>173: </pre><pre>    #    I18n.transliterate("Ærøskøbing")</pre></div>
<div class='line' id='174'><pre>174: </pre><pre>    #    # => "AEroskobing"</pre></div>
<div class='line' id='175'><pre>175: </pre><pre>    #</pre></div>
<div class='line' id='176'><pre>176: </pre><pre>    #    I18n.transliterate("日本語")</pre></div>
<div class='line' id='177'><pre>177: </pre><pre>    #    # => "???"</pre></div>
<div class='line' id='178'><pre>178: </pre><pre>    #</pre></div>
<div class='line' id='179'><pre>179: </pre><pre>    # It's also possible to add support for per-locale transliterations. I18n</pre></div>
<div class='line' id='180'><pre>180: </pre><pre>    # expects transliteration rules to be stored at</pre></div>
<div class='line' id='181'><pre>181: </pre><pre>    # <tt>i18n.transliterate.rule</tt>.</pre></div>
<div class='line' id='182'><pre>182: </pre><pre>    #</pre></div>
<div class='line' id='183'><pre>183: </pre><pre>    # Transliteration rules can either be a Hash or a Proc. Procs must accept a</pre></div>
<div class='line' id='184'><pre>184: </pre><pre>    # single string argument. Hash rules inherit the default transliteration</pre></div>
<div class='line' id='185'><pre>185: </pre><pre>    # rules, while Procs do not.</pre></div>
<div class='line' id='186'><pre>186: </pre><pre>    #</pre></div>
<div class='line' id='187'><pre>187: </pre><pre>    # *Examples*</pre></div>
<div class='line' id='188'><pre>188: </pre><pre>    #</pre></div>
<div class='line' id='189'><pre>189: </pre><pre>    # Setting a Hash in <locale>.yml:</pre></div>
<div class='line' id='190'><pre>190: </pre><pre>    #</pre></div>
<div class='line' id='191'><pre>191: </pre><pre>    #    i18n:</pre></div>
<div class='line' id='192'><pre>192: </pre><pre>    #      transliterate:</pre></div>
<div class='line' id='193'><pre>193: </pre><pre>    #        rule:</pre></div>
<div class='line' id='194'><pre>194: </pre><pre>    #          ü: "ue"</pre></div>
<div class='line' id='195'><pre>195: </pre><pre>    #          ö: "oe"</pre></div>
<div class='line' id='196'><pre>196: </pre><pre>    #</pre></div>
<div class='line' id='197'><pre>197: </pre><pre>    # Setting a Hash using Ruby:</pre></div>
<div class='line' id='198'><pre>198: </pre><pre>    #</pre></div>
<div class='line' id='199'><pre>199: </pre><pre>    #     store_translations(:de, :i18n => {</pre></div>
<div class='line' id='200'><pre>200: </pre><pre>    #       :transliterate => {</pre></div>
<div class='line' id='201'><pre>201: </pre><pre>    #         :rule => {</pre></div>
<div class='line' id='202'><pre>202: </pre><pre>    #           "ü" => "ue",</pre></div>
<div class='line' id='203'><pre>203: </pre><pre>    #           "ö" => "oe"</pre></div>
<div class='line' id='204'><pre>204: </pre><pre>    #         }</pre></div>
<div class='line' id='205'><pre>205: </pre><pre>    #       }</pre></div>
<div class='line' id='206'><pre>206: </pre><pre>    #     )</pre></div>
<div class='line' id='207'><pre>207: </pre><pre>    #</pre></div>
<div class='line' id='208'><pre>208: </pre><pre>    # Setting a Proc:</pre></div>
<div class='line' id='209'><pre>209: </pre><pre>    #</pre></div>
<div class='line' id='210'><pre>210: </pre><pre>    #     translit = lambda {|string| MyTransliterator.transliterate(string) }</pre></div>
<div class='line' id='211'><pre>211: </pre><pre>    #     store_translations(:xx, :i18n => {:transliterate => {:rule => translit})</pre></div>
<div class='line' id='212'><pre>212: </pre><pre>    #</pre></div>
<div class='line' id='213'><pre>213: </pre><pre>    # Transliterating strings:</pre></div>
<div class='line' id='214'><pre>214: </pre><pre>    #</pre></div>
<div class='line' id='215'><pre>215: </pre><pre>    #     I18n.locale = :en</pre></div>
<div class='line' id='216'><pre>216: </pre><pre>    #     I18n.transliterate("Jürgen") # => "Jurgen"</pre></div>
<div class='line' id='217'><pre>217: </pre><pre>    #     I18n.locale = :de</pre></div>
<div class='line' id='218'><pre>218: </pre><pre>    #     I18n.transliterate("Jürgen") # => "Juergen"</pre></div>
<div class='line' id='219'><pre>219: </pre><pre>    #     I18n.transliterate("Jürgen", :locale => :en) # => "Jurgen"</pre></div>
<div class='line' id='220'><pre>220: </pre><pre>    #     I18n.transliterate("Jürgen", :locale => :de) # => "Juergen"</pre></div>
<div class='line' id='221'><pre>221: </pre><pre>    def transliterate(*args)</pre></div>
<div class='line' id='222'><pre>222: </pre><pre>      options      = args.pop.dup if args.last.is_a?(Hash)</pre></div>
<div class='line' id='223'><pre>223: </pre><pre>      key          = args.shift</pre></div>
<div class='line' id='224'><pre>224: </pre><pre>      locale       = options && options.delete(:locale) || config.locale</pre></div>
<div class='line' id='225'><pre>225: </pre><pre>      handling     = options && (options.delete(:throw) && :throw || options.delete(:raise) && :raise)</pre></div>
<div class='line' id='226'><pre>226: </pre><pre>      replacement  = options && options.delete(:replacement)</pre></div>
<div class='line' id='227'><pre>227: </pre><pre>      config.backend.transliterate(locale, key, replacement)</pre></div>
<div class='line' id='228'><pre>228: </pre><pre>    rescue I18n::ArgumentError => exception</pre></div>
<div class='line' id='229'><pre>229: </pre><pre>      handle_exception(handling, exception, locale, key, options || {})</pre></div>
<div class='line' id='230'><pre>230: </pre><pre>    end</pre></div>
<div class='line' id='231'><pre>231: </pre><pre></pre></div>
<div class='line' id='232'><pre>232: </pre><pre>    # Localizes certain objects, such as dates and numbers to local formatting.</pre></div>
<div class='line' id='233'><pre>233: </pre><pre>    def localize(object, options = nil)</pre></div>
<div class='line' id='234'><pre>234: </pre><pre>      options = options ? options.dup : {}</pre></div>
<div class='line' id='235'><pre>235: </pre><pre>      locale = options.delete(:locale) || config.locale</pre></div>
<div class='line' id='236'><pre>236: </pre><pre>      format = options.delete(:format) || :default</pre></div>
<div class='line' id='237'><pre>237: </pre><pre>      config.backend.localize(locale, object, format, options)</pre></div>
<div class='line' id='238'><pre>238: </pre><pre>    end</pre></div>
<div class='line' id='239'><pre>239: </pre><pre>    alias :l :localize</pre></div>
<div class='line' id='240'><pre>240: </pre><pre></pre></div>
<div class='line' id='241'><pre>241: </pre><pre>    # Executes block with given I18n.locale set.</pre></div>
<div class='line' id='242'><pre>242: </pre><pre>    def with_locale(tmp_locale = nil)</pre></div>
<div class='line' id='243'><pre>243: </pre><pre>      if tmp_locale</pre></div>
<div class='line' id='244'><pre>244: </pre><pre>        current_locale = self.locale</pre></div>
<div class='line' id='245'><pre>245: </pre><pre>        self.locale    = tmp_locale</pre></div>
<div class='line' id='246'><pre>246: </pre><pre>      end</pre></div>
<div class='line' id='247'><pre>247: </pre><pre>      yield</pre></div>
<div class='line' id='248'><pre>248: </pre><pre>    ensure</pre></div>
<div class='line' id='249'><pre>249: </pre><pre>      self.locale = current_locale if tmp_locale</pre></div>
<div class='line' id='250'><pre>250: </pre><pre>    end</pre></div>
<div class='line' id='251'><pre>251: </pre><pre></pre></div>
<div class='line' id='252'><pre>252: </pre><pre>    # Merges the given locale, key and scope into a single array of keys.</pre></div>
<div class='line' id='253'><pre>253: </pre><pre>    # Splits keys that contain dots into multiple keys. Makes sure all</pre></div>
<div class='line' id='254'><pre>254: </pre><pre>    # keys are Symbols.</pre></div>
<div class='line' id='255'><pre>255: </pre><pre>    def normalize_keys(locale, key, scope, separator = nil)</pre></div>
<div class='line' id='256'><pre>256: </pre><pre>      separator ||= I18n.default_separator</pre></div>
<div class='line' id='257'><pre>257: </pre><pre></pre></div>
<div class='line' id='258'><pre>258: </pre><pre>      keys = []</pre></div>
<div class='line' id='259'><pre>259: </pre><pre>      keys.concat normalize_key(locale, separator)</pre></div>
<div class='line' id='260'><pre>260: </pre><pre>      keys.concat normalize_key(scope, separator)</pre></div>
<div class='line' id='261'><pre>261: </pre><pre>      keys.concat normalize_key(key, separator)</pre></div>
<div class='line' id='262'><pre>262: </pre><pre>      keys</pre></div>
<div class='line' id='263'><pre>263: </pre><pre>    end</pre></div>
<div class='line' id='264'><pre>264: </pre><pre></pre></div>
<div class='line' id='265'><pre>265: </pre><pre>  # making these private until Ruby 1.9.2 can send to protected methods again</pre></div>
<div class='line' id='266'><pre>266: </pre><pre>  # see http://redmine.ruby-lang.org/repositories/revision/ruby-19?rev=24280</pre></div>
<div class='line' id='267'><pre>267: </pre><pre>  private</pre></div>
<div class='line' id='268'><pre>268: </pre><pre></pre></div>
<div class='line' id='269'><pre>269: </pre><pre>    # Any exceptions thrown in translate will be sent to the @@exception_handler</pre></div>
<div class='line' id='270'><pre>270: </pre><pre>    # which can be a Symbol, a Proc or any other Object unless they're forced to</pre></div>
<div class='line' id='271'><pre>271: </pre><pre>    # be raised or thrown (MissingTranslation).</pre></div>
<div class='line' id='272'><pre>272: </pre><pre>    #</pre></div>
<div class='line' id='273'><pre>273: </pre><pre>    # If exception_handler is a Symbol then it will simply be sent to I18n as</pre></div>
<div class='line' id='274'><pre>274: </pre><pre>    # a method call. A Proc will simply be called. In any other case the</pre></div>
<div class='line' id='275'><pre>275: </pre><pre>    # method #call will be called on the exception_handler object.</pre></div>
<div class='line' id='276'><pre>276: </pre><pre>    #</pre></div>
<div class='line' id='277'><pre>277: </pre><pre>    # Examples:</pre></div>
<div class='line' id='278'><pre>278: </pre><pre>    #</pre></div>
<div class='line' id='279'><pre>279: </pre><pre>    #   I18n.exception_handler = :default_exception_handler             # this is the default</pre></div>
<div class='line' id='280'><pre>280: </pre><pre>    #   I18n.default_exception_handler(exception, locale, key, options) # will be called like this</pre></div>
<div class='line' id='281'><pre>281: </pre><pre>    #</pre></div>
<div class='line' id='282'><pre>282: </pre><pre>    #   I18n.exception_handler = lambda { |*args| ... }                 # a lambda</pre></div>
<div class='line' id='283'><pre>283: </pre><pre>    #   I18n.exception_handler.call(exception, locale, key, options)    # will be called like this</pre></div>
<div class='line' id='284'><pre>284: </pre><pre>    #</pre></div>
<div class='line' id='285'><pre>285: </pre><pre>    #  I18n.exception_handler = I18nExceptionHandler.new                # an object</pre></div>
<div class='line' id='286'><pre>286: </pre><pre>    #  I18n.exception_handler.call(exception, locale, key, options)     # will be called like this</pre></div>
<div class='line' id='287'><pre>287: </pre><pre>    def handle_exception(handling, exception, locale, key, options)</pre></div>
<div class='line' id='288'><pre>288: </pre><pre>      case handling</pre></div>
<div class='line' id='289'><pre>289: </pre><pre>      when :raise</pre></div>
<div class='line' id='290'><pre>290: </pre><pre>        raise(exception.respond_to?(:to_exception) ? exception.to_exception : exception)</pre></div>
<div class='line' id='291'><pre>291: </pre><pre>      when :throw</pre></div>
<div class='line' id='292'><pre>292: </pre><pre>        throw :exception, exception</pre></div>
<div class='line' id='293'><pre>293: </pre><pre>      else</pre></div>
<div class='line' id='294'><pre>294: </pre><pre>        case handler = options[:exception_handler] || config.exception_handler</pre></div>
<div class='line' id='295'><pre>295: </pre><pre>        when Symbol</pre></div>
<div class='line' id='296'><pre>296: </pre><pre>          send(handler, exception, locale, key, options)</pre></div>
<div class='line' id='297'><pre>297: </pre><pre>        else</pre></div>
<div class='line' id='298'><pre>298: </pre><pre>          handler.call(exception, locale, key, options)</pre></div>
<div class='line' id='299'><pre>299: </pre><pre>        end</pre></div>
<div class='line' id='300'><pre>300: </pre><pre>      end</pre></div>
<div class='line' id='301'><pre>301: </pre><pre>    end</pre></div>
<div class='line' id='302'><pre>302: </pre><pre></pre></div>
<div class='line' id='303'><pre>303: </pre><pre>    def normalize_key(key, separator)</pre></div>
<div class='line' id='304'><pre>304: </pre><pre>      normalized_key_cache[separator][key] ||=</pre></div>
<div class='line' id='305'><pre>305: </pre><pre>        case key</pre></div>
<div class='line' id='306'><pre>306: </pre><pre>        when Array</pre></div>
<div class='line' id='307'><pre>307: </pre><pre>          key.map { |k| normalize_key(k, separator) }.flatten</pre></div>
<div class='line' id='308'><pre>308: </pre><pre>        else</pre></div>
<div class='line' id='309'><pre>309: </pre><pre>          keys = key.to_s.split(separator)</pre></div>
<div class='line' id='310'><pre>310: </pre><pre>          keys.delete('')</pre></div>
<div class='line' id='311'><pre>311: </pre><pre>          keys.map! { |k| k.to_sym }</pre></div>
<div class='line' id='312'><pre>312: </pre><pre>          keys</pre></div>
<div class='line' id='313'><pre>313: </pre><pre>        end</pre></div>
<div class='line' id='314'><pre>314: </pre><pre>    end</pre></div>
<div class='line' id='315'><pre>315: </pre><pre></pre></div>
<div class='line' id='316'><pre>316: </pre><pre>    def normalized_key_cache</pre></div>
<div class='line' id='317'><pre>317: </pre><pre>      @normalized_key_cache ||= Hash.new { |h,k| h[k] = {} }</pre></div>
<div class='line' id='318'><pre>318: </pre><pre>    end</pre></div>
<div class='line' id='319'><pre>319: </pre><pre></pre></div>
<div class='line' id='320'><pre>320: </pre><pre>    # DEPRECATED. Use I18n.normalize_keys instead.</pre></div>
<div class='line' id='321'><pre>321: </pre><pre>    def normalize_translation_keys(locale, key, scope, separator = nil)</pre></div>
<div class='line' id='322'><pre>322: </pre><pre>      puts "I18n.normalize_translation_keys is deprecated. Please use the class I18n.normalize_keys instead."</pre></div>
<div class='line' id='323'><pre>323: </pre><pre>      normalize_keys(locale, key, scope, separator)</pre></div>
<div class='line' id='324'><pre>324: </pre><pre>    end</pre></div>
<div class='line' id='325'><pre>325: </pre><pre></pre></div>
<div class='line' id='326'><pre>326: </pre><pre>    # DEPRECATED. Please use the I18n::ExceptionHandler class instead.</pre></div>
<div class='line' id='327'><pre>327: </pre><pre>    def default_exception_handler(exception, locale, key, options)</pre></div>
<div class='line' id='328'><pre>328: </pre><pre>      puts "I18n.default_exception_handler is deprecated. Please use the class I18n::ExceptionHandler instead " +</pre></div>
<div class='line' id='329'><pre>329: </pre><pre>           "(an instance of which is set to I18n.exception_handler by default)."</pre></div>
<div class='line' id='330'><pre>330: </pre><pre>      exception.is_a?(MissingTranslation) ? exception.message : raise(exception)</pre></div>
<div class='line' id='331'><pre>331: </pre><pre>    end</pre></div>
<div class='line' id='332'><pre>332: </pre><pre>  })</pre></div>
<div class='line' id='333'><pre>333: </pre><pre>end</pre></div>
<script src='../../../../../../../../../../../../zepto.js'></script>
<script>
  var update_highlight = function() {
    $('div.highlight').removeClass('highlight');
    var hash = window.location.hash;
    if (hash.length > 0) $(hash).addClass('highlight');
  };
  $(window).on('hashchange', update_highlight);
  update_highlight();

  $(window).on('mouseenter', 'div.calls', function() {
    $(this).children().last().show();
  });
  $(window).on('mouseleave', 'div.calls', function() {
    $(this).children().last().hide();
  });
</script>
</body>
</html>
