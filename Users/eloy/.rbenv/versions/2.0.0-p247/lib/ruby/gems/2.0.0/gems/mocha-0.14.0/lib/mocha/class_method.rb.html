<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type="text/css">
.highlight { background-color: rgb(255, 255, 204); }
pre { display: inline; }
div.calls { display: inline; }
span.method_definition { font-weight: bold; }
span.method_call { font-weight: bold; }
div.line a { font-size: 12px; }
</style>
</head>
<body>
<div class='line' id='1'><pre>  1: </pre><pre>require 'metaclass'</pre></div>
<div class='line' id='2'><pre>  2: </pre><pre></pre></div>
<div class='line' id='3'><pre>  3: </pre><pre>module Mocha</pre></div>
<div class='line' id='4'><pre>  4: </pre><pre></pre></div>
<div class='line' id='5'><pre>  5: </pre><pre>  class ClassMethod</pre></div>
<div class='line' id='6'><pre>  6: </pre><pre></pre></div>
<div class='line' id='7'><pre>  7: </pre><pre>    attr_reader :stubbee, :method</pre></div>
<div class='line' id='8'><pre>  8: </pre><pre></pre></div>
<div class='line' id='9'><pre>  9: </pre><div class='calls'><span class='method_definition'><pre>    def initialize(stubbee, method)</pre></span> <span style='display:none;'><a href='object_methods.rb.html#121'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/object_methods.rb:121</a> <a href='object_methods.rb.html#77'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/object_methods.rb:77</a></span></div></div>
<div class='line' id='10'><pre> 10: </pre><pre>      @stubbee = stubbee</pre></div>
<div class='line' id='11'><pre> 11: </pre><pre>      @original_method, @original_visibility = nil, nil</pre></div>
<div class='line' id='12'><pre> 12: </pre><pre>      @method = RUBY_VERSION < '1.9' ? method.to_s : method.to_sym</pre></div>
<div class='line' id='13'><pre> 13: </pre><pre>    end</pre></div>
<div class='line' id='14'><pre> 14: </pre><pre></pre></div>
<div class='line' id='15'><pre> 15: </pre><div class='calls'><span class='method_definition'><pre>    def stub</pre></span> <span style='display:none;'><a href='central.rb.html#13'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/central.rb:13</a></span></div></div>
<div class='line' id='16'><pre> 16: </pre><div class='calls'><span class='method_call'><pre>      hide_original_method</pre></span> <span style='display:none;'><a href='class_method.rb.html#37'>Mocha::ClassMethod#hide_original_method</a> <a href='class_method.rb.html#42'>Class#protected_instance_methods</a> <a href='class_method.rb.html#44'>Class#private_instance_methods</a></span></div></div>
<div class='line' id='17'><pre> 17: </pre><div class='calls'><span class='method_call'><pre>      define_new_method</pre></span> <span style='display:none;'><a href='class_method.rb.html#56'>Mocha::ClassMethod#define_new_method</a></span></div></div>
<div class='line' id='18'><pre> 18: </pre><pre>    end</pre></div>
<div class='line' id='19'><pre> 19: </pre><pre></pre></div>
<div class='line' id='20'><pre> 20: </pre><div class='calls'><span class='method_definition'><pre>    def unstub</pre></span> <span style='display:none;'><a href='central.rb.html#20'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/central.rb:20</a></span></div></div>
<div class='line' id='21'><pre> 21: </pre><div class='calls'><span class='method_call'><pre>      remove_new_method</pre></span> <span style='display:none;'><a href='class_method.rb.html#64'>Mocha::ClassMethod#remove_new_method</a></span></div></div>
<div class='line' id='22'><pre> 22: </pre><div class='calls'><span class='method_call'><pre>      restore_original_method</pre></span> <span style='display:none;'><a href='class_method.rb.html#68'>Mocha::ClassMethod#restore_original_method</a></span></div></div>
<div class='line' id='23'><pre> 23: </pre><div class='calls'><span class='method_call'><pre>      mock.unstub(method.to_sym)</pre></span> <span style='display:none;'><a href='class_method.rb.html#29'>Mocha::ClassMethod#mock</a> <a href='mock.rb.html#110'>Mocha::Mock#unstub</a></span></div></div>
<div class='line' id='24'><pre> 24: </pre><div class='calls'><span class='method_call'><pre>      unless mock.any_expectations?</pre></span> <span style='display:none;'><a href='class_method.rb.html#29'>Mocha::ClassMethod#mock</a> <a href='mock.rb.html#277'>Mocha::Mock#any_expectations?</a></span></div></div>
<div class='line' id='25'><pre> 25: </pre><div class='calls'><span class='method_call'><pre>        reset_mocha</pre></span> <span style='display:none;'><a href='class_method.rb.html#33'>Mocha::ClassMethod#reset_mocha</a></span></div></div>
<div class='line' id='26'><pre> 26: </pre><pre>      end</pre></div>
<div class='line' id='27'><pre> 27: </pre><pre>    end</pre></div>
<div class='line' id='28'><pre> 28: </pre><pre></pre></div>
<div class='line' id='29'><pre> 29: </pre><div class='calls'><span class='method_definition'><pre>    def mock</pre></span> <span style='display:none;'><a href='class_method.rb.html#23'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:23</a> <a href='class_method.rb.html#24'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:24</a></span></div></div>
<div class='line' id='30'><pre> 30: </pre><div class='calls'><span class='method_call'><pre>      stubbee.mocha</pre></span> <span style='display:none;'><a href='object_methods.rb.html#17'>Mocha::ObjectMethods#mocha</a></span></div></div>
<div class='line' id='31'><pre> 31: </pre><pre>    end</pre></div>
<div class='line' id='32'><pre> 32: </pre><pre></pre></div>
<div class='line' id='33'><pre> 33: </pre><div class='calls'><span class='method_definition'><pre>    def reset_mocha</pre></span> <span style='display:none;'><a href='class_method.rb.html#25'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:25</a></span></div></div>
<div class='line' id='34'><pre> 34: </pre><div class='calls'><span class='method_call'><pre>      stubbee.reset_mocha</pre></span> <span style='display:none;'><a href='object_methods.rb.html#22'>Mocha::ObjectMethods#reset_mocha</a></span></div></div>
<div class='line' id='35'><pre> 35: </pre><pre>    end</pre></div>
<div class='line' id='36'><pre> 36: </pre><pre></pre></div>
<div class='line' id='37'><pre> 37: </pre><div class='calls'><span class='method_definition'><pre>    def hide_original_method</pre></span> <span style='display:none;'><a href='class_method.rb.html#16'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:16</a></span></div></div>
<div class='line' id='38'><pre> 38: </pre><div class='calls'><span class='method_call'><pre>      if method_exists?(method)</pre></span> <span style='display:none;'><a href='class_method.rb.html#95'>Mocha::ClassMethod#method_exists?</a> <a href='instance_method.rb.html#7'>Mocha::InstanceMethod#method_exists?</a> <a href='instance_method.rb.html#8'>Object#public_methods</a></span></div></div>
<div class='line' id='39'><pre> 39: </pre><pre>        begin</pre></div>
<div class='line' id='40'><pre> 40: </pre><pre>          @original_method = stubbee._method(method)</pre></div>
<div class='line' id='41'><pre> 41: </pre><pre>          @original_visibility = :public</pre></div>
<div class='line' id='42'><pre> 42: </pre><div class='calls'><span class='method_definition'><pre>          if stubbee.__metaclass__.protected_instance_methods.include?(method)</pre></span> <span style='display:none;'><a href='class_method.rb.html#16'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:16</a></span></div></div>
<div class='line' id='43'><pre> 43: </pre><pre>            @original_visibility = :protected</pre></div>
<div class='line' id='44'><pre> 44: </pre><div class='calls'><span class='method_definition'><pre>          elsif stubbee.__metaclass__.private_instance_methods.include?(method)</pre></span> <span style='display:none;'><a href='class_method.rb.html#16'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:16</a></span></div></div>
<div class='line' id='45'><pre> 45: </pre><pre>            @original_visibility = :private</pre></div>
<div class='line' id='46'><pre> 46: </pre><pre>          end</pre></div>
<div class='line' id='47'><pre> 47: </pre><div class='calls'><span class='method_call'><pre>          if @original_method && @original_method.owner == stubbee.__metaclass__</pre></span> <span style='display:none;'><a href='../../../metaclass-0.0.1/lib/metaclass/object_methods.rb.html#2'>Metaclass::ObjectMethods#__metaclass__</a></span></div></div>
<div class='line' id='48'><pre> 48: </pre><div class='calls'><span class='method_call'><pre>            stubbee.__metaclass__.send(:remove_method, method)</pre></span> <span style='display:none;'><a href='../../../metaclass-0.0.1/lib/metaclass/object_methods.rb.html#2'>Metaclass::ObjectMethods#__metaclass__</a></span></div></div>
<div class='line' id='49'><pre> 49: </pre><pre>          end</pre></div>
<div class='line' id='50'><pre> 50: </pre><pre>        rescue NameError</pre></div>
<div class='line' id='51'><pre> 51: </pre><pre>          # deal with nasties like ActiveRecord::Associations::AssociationProxy</pre></div>
<div class='line' id='52'><pre> 52: </pre><pre>        end</pre></div>
<div class='line' id='53'><pre> 53: </pre><pre>      end</pre></div>
<div class='line' id='54'><pre> 54: </pre><pre>    end</pre></div>
<div class='line' id='55'><pre> 55: </pre><pre></pre></div>
<div class='line' id='56'><pre> 56: </pre><div class='calls'><span class='method_definition'><pre>    def define_new_method</pre></span> <span style='display:none;'><a href='class_method.rb.html#17'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:17</a></span></div></div>
<div class='line' id='57'><pre> 57: </pre><div class='calls'><span class='method_call'><pre>      stubbee.__metaclass__.class_eval(%{</pre></span> <span style='display:none;'><a href='../../../metaclass-0.0.1/lib/metaclass/object_methods.rb.html#2'>Metaclass::ObjectMethods#__metaclass__</a></span></div></div>
<div class='line' id='58'><pre> 58: </pre><pre>        def #{method}(*args, &block)</pre></div>
<div class='line' id='59'><pre> 59: </pre><pre>          mocha.method_missing(:#{method}, *args, &block)</pre></div>
<div class='line' id='60'><pre> 60: </pre><pre>        end</pre></div>
<div class='line' id='61'><pre> 61: </pre><pre>      }, __FILE__, __LINE__)</pre></div>
<div class='line' id='62'><pre> 62: </pre><div class='calls'><span class='method_definition'><pre>    end</pre></span> <span style='display:none;'><a href='../../../../../../../../../../../Code/CocoaPods/CocoaPods/lib/cocoapods/hooks/installer_representation.rb.html#41'>/Users/eloy/Code/CocoaPods/CocoaPods/lib/cocoapods/hooks/installer_representation.rb:41</a></span></div></div>
<div class='line' id='63'><pre> 63: </pre><div class='calls'><span class='method_call'><pre></pre></span> <span style='display:none;'><a href='mock.rb.html#227'>Mocha::Mock#method_missing</a> <a href='object_methods.rb.html#17'>Mocha::ObjectMethods#mocha</a></span></div></div>
<div class='line' id='64'><pre> 64: </pre><div class='calls'><span class='method_definition'><pre>    def remove_new_method</pre></span> <span style='display:none;'><a href='class_method.rb.html#21'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:21</a></span></div></div>
<div class='line' id='65'><pre> 65: </pre><div class='calls'><span class='method_call'><pre>      stubbee.__metaclass__.send(:remove_method, method)</pre></span> <span style='display:none;'><a href='../../../metaclass-0.0.1/lib/metaclass/object_methods.rb.html#2'>Metaclass::ObjectMethods#__metaclass__</a></span></div></div>
<div class='line' id='66'><pre> 66: </pre><pre>    end</pre></div>
<div class='line' id='67'><pre> 67: </pre><pre></pre></div>
<div class='line' id='68'><pre> 68: </pre><div class='calls'><span class='method_definition'><pre>    def restore_original_method</pre></span> <span style='display:none;'><a href='class_method.rb.html#22'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:22</a></span></div></div>
<div class='line' id='69'><pre> 69: </pre><div class='calls'><span class='method_call'><pre>      if @original_method && @original_method.owner == stubbee.__metaclass__</pre></span> <span style='display:none;'><a href='../../../metaclass-0.0.1/lib/metaclass/object_methods.rb.html#2'>Metaclass::ObjectMethods#__metaclass__</a></span></div></div>
<div class='line' id='70'><pre> 70: </pre><pre>        if RUBY_VERSION < '1.9'</pre></div>
<div class='line' id='71'><pre> 71: </pre><pre>          original_method = @original_method</pre></div>
<div class='line' id='72'><pre> 72: </pre><pre>          stubbee.__metaclass__.send(:define_method, method) do |*args, &block|</pre></div>
<div class='line' id='73'><pre> 73: </pre><pre>            original_method.call(*args, &block)</pre></div>
<div class='line' id='74'><pre> 74: </pre><pre>          end</pre></div>
<div class='line' id='75'><pre> 75: </pre><pre>        else</pre></div>
<div class='line' id='76'><pre> 76: </pre><div class='calls'><span class='method_call'><pre>          stubbee.__metaclass__.send(:define_method, method, @original_method)</pre></span> <span style='display:none;'><a href='../../../metaclass-0.0.1/lib/metaclass/object_methods.rb.html#2'>Metaclass::ObjectMethods#__metaclass__</a></span></div></div>
<div class='line' id='77'><pre> 77: </pre><pre>        end</pre></div>
<div class='line' id='78'><pre> 78: </pre><pre>      end</pre></div>
<div class='line' id='79'><pre> 79: </pre><pre>      if @original_visibility</pre></div>
<div class='line' id='80'><pre> 80: </pre><div class='calls'><span class='method_call'><pre>        Module.instance_method(@original_visibility).bind(stubbee.__metaclass__).call(method)</pre></span> <span style='display:none;'><a href='../../../metaclass-0.0.1/lib/metaclass/object_methods.rb.html#2'>Metaclass::ObjectMethods#__metaclass__</a></span></div></div>
<div class='line' id='81'><pre> 81: </pre><pre>      end</pre></div>
<div class='line' id='82'><pre> 82: </pre><pre>    end</pre></div>
<div class='line' id='83'><pre> 83: </pre><pre></pre></div>
<div class='line' id='84'><pre> 84: </pre><div class='calls'><span class='method_definition'><pre>    def matches?(other)</pre></span> <span style='display:none;'><a href='central.rb.html#12'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/central.rb:12</a> <a href='central.rb.html#19'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/central.rb:19</a></span></div></div>
<div class='line' id='85'><pre> 85: </pre><pre>      return false unless (other.class == self.class)</pre></div>
<div class='line' id='86'><pre> 86: </pre><pre>      (stubbee.object_id == other.stubbee.object_id) and (method == other.method)</pre></div>
<div class='line' id='87'><pre> 87: </pre><pre>    end</pre></div>
<div class='line' id='88'><pre> 88: </pre><pre></pre></div>
<div class='line' id='89'><pre> 89: </pre><pre>    alias_method :==, :eql?</pre></div>
<div class='line' id='90'><pre> 90: </pre><pre></pre></div>
<div class='line' id='91'><pre> 91: </pre><pre>    def to_s</pre></div>
<div class='line' id='92'><pre> 92: </pre><pre>      "#{stubbee}.#{method}"</pre></div>
<div class='line' id='93'><pre> 93: </pre><pre>    end</pre></div>
<div class='line' id='94'><pre> 94: </pre><pre></pre></div>
<div class='line' id='95'><pre> 95: </pre><div class='calls'><span class='method_definition'><pre>    def method_exists?(method)</pre></span> <span style='display:none;'><a href='class_method.rb.html#38'>/Users/eloy/.rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/mocha-0.14.0/lib/mocha/class_method.rb:38</a></span></div></div>
<div class='line' id='96'><pre> 96: </pre><pre>      symbol = method.to_sym</pre></div>
<div class='line' id='97'><pre> 97: </pre><div class='calls'><span class='method_call'><pre>      __metaclass__ = stubbee.__metaclass__</pre></span> <span style='display:none;'><a href='../../../metaclass-0.0.1/lib/metaclass/object_methods.rb.html#2'>Metaclass::ObjectMethods#__metaclass__</a></span></div></div>
<div class='line' id='98'><pre> 98: </pre><pre>      __metaclass__.public_method_defined?(symbol) || __metaclass__.protected_method_defined?(symbol) || __metaclass__.private_method_defined?(symbol)</pre></div>
<div class='line' id='99'><pre> 99: </pre><pre>    end</pre></div>
<div class='line' id='100'><pre>100: </pre><pre></pre></div>
<div class='line' id='101'><pre>101: </pre><pre>  end</pre></div>
<div class='line' id='102'><pre>102: </pre><pre></pre></div>
<div class='line' id='103'><pre>103: </pre><pre>end</pre></div>
<script src='../../../../../../../../../../../../../zepto.js'></script>
<script>
  var update_highlight = function() {
    $('div.highlight').removeClass('highlight');
    var hash = window.location.hash;
    if (hash.length > 0) $(hash).addClass('highlight');
  };
  $(window).on('hashchange', update_highlight);
  update_highlight();

  $(window).on('mouseenter', 'div.calls', function() {
    $(this).children().last().show();
  });
  $(window).on('mouseleave', 'div.calls', function() {
    $(this).children().last().hide();
  });
</script>
</body>
</html>
